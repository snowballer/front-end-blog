# Router

>随着单页面应用（Single Page Application）的普及，前端路由受到了普遍关注。绝大数前端框架都会配置独立开发或推荐使用的路由库。

## 前端路由的实现方式

1.hashHistory:

通过hashchange事件来监听window.location.hash的变化来实现路由功能。

优点：由于hashchange为旧标准，浏览器支持度高，兼容IE。

缺点：路径匹配时会多出/#/部分

2.browserHistory:

通过popState事件来监听window.history中的pushState()和replaceState()方法来实现路由功能。

缺点：由于popState为HTML5新标准，旧浏览器不支持，IE兼容性差。

优点：可以支持hash，可以很方便地操作浏览器历史记录

## API说明

- HashChangeEvent：

  当URL中的片段标识符发生改变时触发（URL中紧跟'#'号的部分，包括‘#’号）

- PopStateEvent：

  当活动历史记录条目更改时，将触发popstate事件。需要注意的是调用history.pushState()或history.replaceState()不会触发popstate事件。只有在做出浏览器动作时，才会触发该事件，如用户点击浏览器的回退按钮（或者在Javascript代码中调用history.back()）

- history.state

  当前URL下对应的状态信息。如果当前URL不是通过pushState或者replaceState产生的，那么history.state是null。

- history.pushState(state, title, url)

  将当前URL和history.state加入到history中，并用新的state和URL替换当前。不会造成页面刷新。

  state：与要跳转到的URL对应的状态信息。

  title：各浏览器支持度不同，可忽略。

  url：要跳转到的URL地址，不能跨域。

  ```javascript

  var stateObj = { foo: "bar" };
  history.pushState(stateObj, "page 2", "bar.html");

  ```

- history.replaceState(state, title, url)

  用新的state和URL替换当前。不会造成页面刷新。

  state：与要跳转到的URL对应的状态信息。

  title：各浏览器支持度不同，可忽略。

  url：要跳转到的URL地址，不能跨域。

  ```javascript

  var stateObj = { foo: "bar" };
  history.replaceState(stateObj, "page 3", "bar2.html");
  
  ```
